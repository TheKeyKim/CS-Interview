# OS

1. 운영 체제를 정의하시고, 목적이 무엇인지 말씀해주세요

- 운영 체제란 하드웨어를 조작하는 로우 레벨의 소프트웨어
- 인간이 직접 하드웨어를 일일히 조정하는 것은 어렵기 때문에, 소프트웨어로서 제어됨.
- 운영 체제(運營 體制, 문화어: 조작 체계) 또는 오퍼레이팅 시스템(Operating System, 약칭:OS)은 시스템 하드웨어를 관리할 뿐 아니라 응용 소프트웨어를 실행하기 위하여 하드웨어 추상화 플랫폼과 공통 시스템 서비스를 제공하는 시스템 소프트웨어이다. 
- 운영체제는 사용자 대신 하드웨어와 데이터 등의 자원을 관리해주고 시스템의 성능을 높여주는 것이 목적

2. 프로세스를 정의하고, 특징을 아는대로 말씀해주세요

- 프로세스란 컴퓨터가 실행하는 작업의 단위
- 하나의 ‘프로그램’을 돌린다는 것이 곧 하나의 프로세스를 의미함.
- 독립적인 pcb와 메모리 공간을 갖음
- 운영체제의 스케쥴링의 대상이 됨.
- 하나의 cpu에 코어에 따라 동시 실행이 가능한 프로세스 수가 나뉨.
- 프로세스(process)는 컴퓨터에서 연속적으로 실행되고 있는 컴퓨터 프로그램을 말한다. 종종 스케줄링의 대상이 되는 작업(task)이라는 용어와 거의 같은 의미로 쓰인다.

특징
- 시분할 작업의 단위
    - 시분할 시스템에서 볼 때, 분할 시간 마다 그 처리 대상이 되는 작업 단위

- 프로세스별로 메모리 공간이 격리됨
    - 각 프로세스가 독립된 메모리 공간을 가지도록 보장되야 함
    . 즉, 프로세스는 타 프로세스,커널로부터 격리되어, 이들 메모리에 읽기/쓰기가 제한됨
    - 통상, 2개 레지스터(base,limit)를 사용

- 하나의 프로그램이 여러 프로세스를 만들 수 있음        
    - 단일 프로그램이 여러 프로세스를 생성 가능
    - 즉, 여러 프로세스들이 동일 프로그램으로 실행 가능

    * (프로그램, 프로세스 비교)
    . 프로그램 : 실행시 프로세스에 관한 광범위한 정보를 갖으며, 디스크에 저장된 수동적인 파일
    . 프로세스 : 프로그램 카운터 같은 관련 자원의 조합을 갖는 능동적인 존재

- 병행 실행이 가능                                      
    - 이때, 프로세스 간 통신 필요 ☞ IPC 참조


3. 쓰레드를 정의하고, 특징을 아는대로 말씀해주세요

- 쓰레드란 프로세스 내에서 나뉘는 작업의 흐름
- 하나의 프로세스가 여러 쓰레드를 가질 수 있으며, 하나만 가질 수도 있음
- 프로세스와 다르게 스케쥴링의 대상이 되지 않음
- pcb와 메모리 영역 대부분을 공유하고 스택의 영역에 각자의 영역을 나뉘어 갖음
- 스레드(thread)는 어떠한 프로그램 내에서, 특히 프로세스 내에서 실행되는 흐름의 단위를 말한다. 일반적으로 한 프로그램은 하나의 스레드를 가지고 있지만, 프로그램 환경에 따라 둘 이상의 스레드를 동시에 실행할 수 있다. 이러한 실행 방식을 멀티스레드(multithread)라고 한다.
- 메모리를 공유하기 때문에 쓰레드간의 통신이 간편함
- 시스템 자원 소모가 줄어들고 응답 시간이 단축됨.
- 그리고 멀티프로세싱의 단점인 Context Switching의 오버헤드가 크게 줄어듬
- 프로세스와는 달리 Code, Data, Heap 영역을 공유 하며 stack만을 다르게 갖음.
- PCB의 모든 영역이 하나 더 생겨야하는 process와는 다르게 pcb를 공유하기 때문에 자원의 소모가 줄어듬.
- 더군다나 프로세스 Context Switching의 경우 캐쉬 메모리를 초기화하지만, 쓰레드는 메모리를 공유하므로, 캐쉬 메모리 초기화가 필요하지 않음.


4. 프로세스와 스레드의 차이는 아는대로 말씀해주세요

- 프로세스란 오에스가 인정하는 작업의 단위임. 프로세스 자체가 집이라면, 쓰레드는 방으로 비유할 수 있을 것임. 집인 프로세스는 국가주택법에 적용을 받지만, 쓰레드는 방이기 때문에 컴퓨터의 정부라할 수 있는 OS의 통제를 받지 않음
- 그렇기 때문에 쓰레드는 사실 상 하나의 코어를 나누어 쓰는 것이기 때문에 성능적으로 효율이 더 좋아지지 않을 수도 있음
- 그러나 하이퍼 스레딩이라는 기술을 통하여, 하나의 코어에서 다른 쓰레드를 실행하는 동앙 쓰이지 않는 잉여자원을 이용하여 동시에 실행되는 것과 흡사한 속도를 낼 수 있음
- 프로세스는 각자의 PCB를 갖으며, 쓰레드는 PCB를 공유하며 메모리의 스택영역에 각자의 영역을 갖음.
- 멀티 쓰레드는 작업의 흐름이 분기되는 것이고, 이는 곧 하나의 프로세스임을 의미함. 만약 하나의 쓰레드에서 예기치 못한 오류가 발생하면 모든 쓰레드가 죽음. 
- 위에 대한 예시로, 구글 크롬의 탭은 각각 쓰레드가 아닌, 프로세스임. 하나의 탭이 먹통이 되더라도, 쓰레드가 아닌 각각이 프로세스이기 때문에, 탭 하나만 죽이면 됨. 이와 같은 경우에서 프로세스의 특징에 빗대어 설명하자면, 구글 크롬 자체는 부모 프로세스이며 탭은 각각이 자식 프로세스임.

5. 멀티 스레딩의 장점과 단점을 아는대로 말씀해주세요.

- 멀티 스레딩은 작업의 흐름을 여럿으로 나눌 수 있고, 분할시킬 수 있음. 간단히 스택포인터와 프로그램카운터를 가져오는 것으로 작업흐름을 분화시킬 수 있는 장점을 갖음.
- 그러나 결국은 하나의 코어를 나누어 쓰는 것이며, 기존에 필요 없는 쓰레드 전환의 과정이 생겨 시간적 손해를 볼 단점이 있으며, 동기화 문제가 발생할 수 있음
- 하이퍼 스레딩이라 불리우는 코어를 나누어 사용할 수 있는 기술을 통해, 멀티 쓰레드의 단점이 어느정도 보완되었음.
- 또한 위에서 언급하였듯이, 하나의 쓰레드가 죽으면 모든 쓰레드를 죽여야한다는 단점이 존재함.


6. 멀티 프로세스 대신 멀티 스레드를 사용하는 이유는 무엇일까요?

- 멀티 프로세스는 문맥전환이 일어남. 문맥전환은 매우 큰 오버헤드를 가지기 때문에 멀티 쓰레드의 장점이 부각됨.

1. 시스템 자원 소모 감소 (자원의 효율성 증대)
    - 프로세스를 생성하여 자원을 할당하는 시스템 콜이 줄어들어 자원을 효율적으로 관리할 수 있다.
2. 처리 비용 감소
    - 스레드 간 데이터를 주고 받는 것이 간단해지고 시스템 자원 소모가 줄어들게 된다.
    - 스레드 사이의 작업량이 작아 Context Switching이 빠르다.
3. 간단한 통신 방법으로 인한 프로그램 응답 시간 단축
    - 스레드는 프로세스 내의 Stack 영역을 제외한 모든 메모리를 공유하기 때문에 통신의 부담이 적다.

7. 멀티 프로세싱과 멀티프로그래밍의 차이는 무엇일까요?

- 멀티 프로세싱은 프로세스 여러 개의 코어에서 여러개의 프로세스를 동시에 처리하는 것
- 멀티 프로그래밍은 기존의 프로세스가 피치 못할 사정(ex- IO 인터럽트)로 런 스테이트에서 빠져나갔을 때, 이 공백을 매꾸기 위하여, 다른 프로세스를 일시적으로 실행하는 기법임.

멀티프로세싱
- 멀티 프로세싱은 다수의 프로세서가 서로 협력적으로 일을 처리하는 것을 의미한다.
컴퓨터는 1대인데 프로세서(CPU)는 2개 이상이다. 보통, 멀티코어시스템(multi-core system)을 포함한다.

멀티프로그래밍
- 초기의 컴퓨터에서는 하나의 프로그램이 메모리에 올라가면 하나의 프로그램만 CPU가 처리를 진행할 수 있었다. 이 과정에서 프로세서의 처리 속도와 입출력 속도 간의 차이로 인해, 입출력이 완료될 때까지 프로세서는 idle한 상태가 된다. 따라서 이는 프로세서의 자원 낭비로 이루어진다.
 프로세서가 입출력 작업의 종료를 대기할 동안 하나의 프로세서에서 다른 프로그램을 수행할 수 있도록 하는 것이 멀티프로그래밍이다.



8. 커널이란 무엇인지 아는대로 설명해주세요.

- 커널이란 OS가 하드웨어에 접근하는 영역의 프로그램을 의미하며, OS라는 거대한 소프트웨어의 일부 영역임. OS자체를 모두 메모리에 올리는 것은 매우 소모가 큰 작업이기 때문에, 이 일부 영역을 메모리에 올림으로써 대체하며, 대부분 OS라 하면 이 커널을 의미함.
- 일반적으로 OS는 OS의 검증을 통해서만 하드웨어에 접근할 수 있게 통제하고 있으며, 이 검증 및 접근 단계를 모두 포함하고 있는 것이 커널임. 
- 일반적으로 유저가 접근하는 운영체제의 가장 표면적인 부분은 USER모드의 OS이며, 직접적 접근이 아닌, 접근 요청을 OS 중에서도 커널로 보내느 것임.

- 컴퓨터와 전원을 켜면 운영체제는 이와 동시에 수행된다. 한편 소프트웨어가 컴퓨터 시스템에서 수행되기 위해서는 메모리에 그 프로그램이 올라가 있어야 한다. 마찬가지로 운영체제 자체도 소프트웨어로서 전원이 켜짐과 동시에 메모리에 올라가야 한다. 하지만, 운영체제처럼 규모가 큰 프로그램이 모두 메모리에 올라간다면 한정된 메모리 공간의 낭비가 심할것이다. 따라서 운영체제 중 항상 필요한 부분만을 전원이 켜짐과 동시에 메모리에 올려놓고 그렇지 않은 부분은 필요할 때 메모리에 올려서 사용하게 된다. 이 때 메모리에 상주하는 운영체제의 부분을 커널이라 한다. 또 이것을 좁은 의미의 운영체제라고도 한다. 즉 커널은 메모리에 상주하는 부분으로써 운영체제의 핵심적인 부분을 뜻한다. 이에 반에 넓은 의미의 운영체제는 커널뿐 아니라 각종 시스템을 위한 유틸리티들을 광범위하게 포함하는 개념이다. (보통은 운영체제라고 하면 커널을 말하게 된다.)

9. 메모리의 힙 영역과 스택영역의 차이점을 말씀해주세요

- 메모리의 힙 영역은 동적할당을 위해 미리 분할되어 있는 영역임.
- 스택영역은 정적할당을 통해 이미 사용될 데이터들과 각종 레지스터의 정보들이 저장되어 있는 영역임.

- 메모리의 스택(stack) 영역은 함수의 호출과 관계되는 지역 변수와 매개변수가 저장되는 영역입니다.스택 영역은 함수의 호출과 함께 할당되며, 함수의 호출이 완료되면 소멸합니다. 이렇게 스택 영역에 저장되는 함수의 호출 정보를 스택 프레임(stack frame)이라고 합니다.

- 메모리의 힙(heap) 영역은 사용자가 직접 관리할 수 있는 '그리고 해야만 하는' 메모리 영역입니다. 힙 영역은 사용자에 의해 메모리 공간이 동적으로 할당되고 해제됩니다. 힙 영역은 메모리의 낮은 주소에서 높은 주소의 방향으로 할당됩니다.

10. 가상 메모리에대해 아는대로 설명해주세요.

- 가상 메모리는 프로세스 별로 나눈 논리적 공간이며, 실제 메모리 주소가 프로세스의 매 실행마다 달라지기 때문에, 0번지부터 시작하는 논리적 가상 공간을 만들어 낸 것임. 
- 이는 기존의 메모리 영역보다도 더 큰 영역을 프로세스들에게 할당할 수 있음을 의미함.(즉, 프로세스마다 가변적으로 메모리 영역을 할당시켜줄 수 있음)

- 가상 메모리 또는 가상 기억 장치(문화어: 가상기억기, virtual memory, virtual storage)는 메모리 관리 기법의 하나로, 기계에 실제로 이용 가능한 기억 자원을 이상적으로 추상화하여 사용자들에게 매우 큰 (주) 메모리로 보이게 만드는 것을 말한다. 각 프로그램에 실제 메모리 주소가 아닌 가상의 메모리 주소를 주는 방식이다.


11. 교착 상태(DeadLock)이를 정의하고 4가지 필요조건과 해결방법을 아는대로 말씀해주세요
```
- 비선점형 
- 상호배제 
- 자원의 할당과 대기 
- 순환대기 
```

- 상호배제(Mutual exclusion) : 프로세스들이 필요로 하는 자원에 대해 배타적인 통제권을 요구한다.
- 점유대기(Hold and wait) : 프로세스가 할당된 자원을 가진 상태에서 다른 자원을 기다린다.
- 비선점(No preemption) : 프로세스가 어떤 자원의 사용을 끝낼 때까지 그 자원을 뺏을 수 없다.
- 순환대기(Circular wait) : 각 프로세스는 순환적으로 다음 프로세스가 요구하는 자원을 가지고 있다.

1. 상호배제 조건의 제거
    - 교착 상태는 두 개 이상의 프로세스가 공유 불가능한 자원을 사용하니 발생하는 것이므로 공유 불가능한, 즉사 상호 배제 조건을 제거하면 교착 상태를 해결할 수 있다.
2. 점유와 대기 조건의 제거
    - 한 프로세스에 수행되기 전에 모든 자원을 할당시키고 나서 점유하지 않을 때에는 다른 프로세스가 자원을 요구하도록 하는 방법이다. 자원 과다 사용으로 인한 효율성, 프로세스가 요구하는 자원을 파악하는 데에 대한 비용, 자원에 대한 내용을 저장 및 복원하기 위한 비용, 기아상태, 무한 대기 등의 문제점이 있다.
3. 비선점 조건의 제거
    - 비선점 프로세스에 대해 선점 가능한 프로토콜을 만들어 준다.
4. 순환 대기 조건의 제거
    - 자원 유형에 따라 순서를 매긴다.

12. 뮤텍스, 세마포어가 무엇인지 설명해주시고 그둘의 차이점에 대해 말씀해주세요

- 뮤텍스란 동기화를 위해 프로세스의 일정 영역의 접근을 금지하는 것을 의미함. 대게 Lock이라는 것을 통해 잠그는 형식임. 뮤텍스라는 것은 프로세스가 소유하는 하나의 객체이며, 프로세스 그 자체가 뮤텍스를 관리함.
- 세마포어란 뮤텍스와 비슷하게 동기화를 위한 기법이지만, 뮤텍스와는 다르게 객체로 이루어진 것이 아님. 세마포어와 뮤텍스의 가장 큰 차이라면, 세마포어는 한 번에 여럿의 프로세스 혹은 쓰레드가 공유된 자원에 접근할 수 있음. 여기서 만약 이진 세마포어라면, 논리적으로는 뮤텍스와 똑같은 역할을 한다고 볼 수 있음.

1. 세마포어 (Semaphores)

프로세스간의 시그널(신호, Signal)을 주고받기 위해 사용되는 정수 값, 리소스의 상태를 나타내는 카운터로 세마포어는 다음 세가지 원자적인 연산만을 지원합니다.

- initialize, decrement, increment
- initialize : 세마포어 초기화. (음이 아닌 정수값으로 초기화)
- decrement : 프로세스를 블록시킬 수 있습니다.
- increment : 블록되었던 프로세스를 깨울 수 있습니다. 이 세마포어를 카운팅 세마포어 또는 범용 세마포어라고 합니다.

세마포어의 값에 따라 운영체제는 프로세스가 즉시 자원을 사용할 지, 자원이 다른 프로세스에 의해 사용 중인걸 알게 될 경우엔 일정 시간을 기다려야 합니다.
프로세스가 자원을 사용하는 동안에는 세마포어 값을 변경함으로서 다른 프로세스들이 기다리게 해야합니다.
- 프로세스간 메시지를 전송하거나 공유메모리를 통해 특정 데이터를 공유하게 될 경우 공유 자원에 여러 프로세스가 접근하면서 문제가 발생하게 됩니다.
 + 하나의 프로세스만 자원에 접근 가능하도록 설정할 때 세마포어를 사용합니다.

이진 세마포어
- 0 또는 1의 값을 가지는 세마포어

2. 뮤텍스 (Mutex)

MUTual EXclusion으로 상호배제라고도 합니다.
0또는 1의 값을 가지는 이진 세마포어와 유사합니다. Critical Section (임계구역)을 가진 스레드들의 실행 시간을 서로 겹치지 않게 단독으로 실행하게 하는 기술입니다.
- 프로세스들의 공유 리소스에 대한 접근을 조율하기 위해 Locking과 Unlocking을 사용합니다.
- 뮤텍스 객체를 두 스레드가 동시에 사용할 수 없습니다.


3. 세마포어와 뮤텍스의 차이

- 세마포어는 뮤텍스가 될 수 있지만, 뮤텍스는 세마포어가 될 수 없습니다.
- 세마포어는 소유할 수 없으며, 뮤텍스는 소유할 수 있고 소유주가 그에 대한 책임을 집니다.
- 뮤텍스의 경우 뮤텍스를 소유하고있는 스레드가 이 뮤텍스를 해제할 수 있습니다. 하지만, 세마포어는 소유하지 않고 있는 스레드가 세마포어를 해제할 수 있습니다.
- 세마포어는 시스템 범위에 걸쳐있고 파일 시스템 상의 파일 형태로 존재합니다. 하지만, 뮤텍스는 프로세스 범위를 가지고 프로그램이 종료될 때 자동으로 지워집니다.
- 세마포어는 동기화 대상이 여러개 일 때, 뮤텍스는 동기화 대상이 오로지 하나 일 때 사용됩니다.


13. 세그먼테이션에 대해 아는대로 설명해주세요.

- 세그먼테이션이란, 프로세스를 나누어 조각낸 후에 메모리에 저장시키는 방식을 의미함. 이는 메모리를 조금 더 효율적으로 쓸 수 있게 하지만, 외부 단편화가 일어나기 쉬움.
- 단편화란 메모리의 영역에서 교체가 일어날 때, 기존의 데이터와는 다른 크기의 데이터들이 들어오면서, 그고 작은 빈공간이 생기는 것을 의미함. 빈공간에는 맞는 데이터를 넣기가 힘들기 때문에, 메모리의 효율성을 떨어트리기 쉽다는 특징이 있음
- 외부단편화란 조각 바깥에서 쓰이지 못하는 메모리의 영역을 의미함.
- 페이징 기법은 내부단편화가 생김. 

- 메모리 세그먼트 방식(Memory segmentation)은 메모리 보호를 수행하는 가장 일반적인 방법 가운데 하나이다. 또다른 방식으로는 페이징이 있다. 세그먼트를 사용하는 컴퓨터 시스템에서 메모리 위치를 참조하는 명령어 피연산자는 세그먼트와 그 세그먼트 안의 오프셋을 증명하는 값을 포함하고 있다.



14. Scheduling에 대해 정의하고, 아는 스케쥴링 기법을 설명해주세요

- 스케쥴링이란 하나의 프로세스가 자원을 독점하는 것을 막기 위하여, 일정한 알고리즘에 따라 cpu에서 실행될 프로세스를 교체해주는 작업을 의미함.
- First In First Out : 온 순서대로 실행시켜줌
- Shortest job first : 작업이 빠르게 끝나는 것을 먼저 교체해줌
- Shortest remain job first : 남은 작업시간이 짧은 것을 교체해줌
- Round Robin : 일정시간 타임퀀텀을 둬 일정시간마다 프로세스를 교체해줌.

● 선점 스케줄링 
  1) RR (Round Robin) : 시분할되어 규정시간내에 처리
  2) SRT (Short Remaining Time) : 가장 짧은 시간 소요 프로세스 먼저 선점
  3) 다단계 큐 : 작업들을 여러종류의 그룹으로 분할, 상위단계선점
  4) 다단계 피드백 큐 : 큐마다 서로 다른 CPU Time Slice 부여 

● 비선점 스케줄링 
  1) 우선순위 스케줄링 : 우선순위에 따라 CPU할당
  2) 기한부 스케줄링 : 명시된 시간이나 기한내에 완료
  3) FCFS (First Come First Service) : FIFO 알고리즘
  4) SJF (Shortest Job First) : 수행시간이 짧은 것 먼저 수행
  5) HRN (Highest Response Ratio Next) : 대기중인 프로세스 중 Responst Ratio가(응답률) 가장 높은 것 선택

16. 문맥교환(Context Switching)에 대해 아는대로 설명해주세요

- 문맥 교환이란, 스케쥴링을 통한 프로세스가 변경 될 때 다음 사용될 프로세스의 PCB를 불러오고, 프로세스의 상태를 변경하는 일련의 과정을 의미함.
- 이는 OS에서 이뤄지며 메모리의 영역에도 영향을 끼치기 때문에 오버헤드가 매우 큰 작업임

- 멀티프로세스 환경에서 CPU가 어떤 하나의 프로세스를 실행하고 있는 상태에서 인터럽트 요청에 의해 다음 우선 순위의 프로세스가 실행되어야 할 때 기존의 프로세스의 상태 또는 레지스터 값(Context)을 저장하고 CPU가 다음 프로세스를 수행하도록 새로운 프로세스의 상태 또는 레지스터 값(Context)를 교체하는 작업을 Context Switch(Context Switching)라고 한다.
